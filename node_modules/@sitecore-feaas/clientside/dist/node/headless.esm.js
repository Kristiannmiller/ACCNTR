var Ot=Object.defineProperty;var j=(t,e)=>{for(var r in e)Ot(t,r,{get:e[r],enumerable:!0})};function S(t,e=r=>{}){var r;let n=()=>{var i,s;let o=new Promise((l,c)=>{i=d=>{t==null||t(d),l(d)},s=c});var a=Object.assign(o,{resolve:i,reject:s,restart:n,first:r});return r=a,a.catch(e),a};return n()}var Dt=typeof HTMLElement=="undefined"?typeof windowJSDOM!="undefined"?windowJSDOM.HTMLElement:class{}:HTMLElement,x=class extends Dt{getProps(e){return{}}constructor(){super(),this.defaultProps={},this.connected=!1,this.refs={},this.descendants=[],this.whenLoaded=S(e=>{this.payload=e}),this.whenRendered=S(()=>this.initialized=!0,()=>this.cancelRender()),this.addEventListener("feaasMount",this),this.addEventListener("feaasUnmount",this)}getRoot(){return this}attributeChangedCallback(e,r,n){this.set()}connectedCallback(){this.mount()}disconnectedCallback(){this.unmount()}mount(){try{let e=this.getParent();if(e&&!e.connected||this.connected)return;this.connected=!0,this.log("FEAAS: Mount",this.tagName,this),this.dispatchEventIndirectly(new Event("feaasMount",{bubbles:!0,composed:!0})),this.getElements().map(r=>{var n;return(n=r.mount)===null||n===void 0?void 0:n.call(r)}),this.set()}catch(e){this.onError(e)}}dispatchEventIndirectly(e){this.dispatchEvent(e);let r=this.getParent();r&&!r.contains(this)&&(Object.defineProperty(e,"target",{value:this,writable:!1}),Object.defineProperty(e,"composedPath",{value:()=>[this],writable:!1}),r.handleEvent(e))}isJSONAttribute(e){return!1}log(...e){let r=e[0];(typeof location!="undefined"&&(location!=null&&location.hostname.startsWith("components-"))||localStorage["Sitecore.Components.Debug"])&&console.log(r+" "+e.slice(1).map(n=>n&&typeof n=="object"?"%O":"%s").join(" "),...e.slice(1))}unmount(){this.connected&&(this.log("FEAAS: Unmount",this),this.dispatchEventIndirectly(new Event("feaasUnmount",{bubbles:!0,composed:!0})),this.connected&&this.initialized&&this.render&&this.update(),this.cancelRender(),this.connected=!1,this.initialized&&this.render&&this.update())}getParent(e=!0){for(var r=this;r=r.parentElement||(r.parentNode instanceof ShadowRoot?r.parentNode.host:null);)if(!e||r.tagName.startsWith("FEAAS-"))return r;if(this.tagName!="FEAAS-CONTEXT")return document.querySelector("feaas-context")}getElements(e=this.getRoot(),r=!0){return Array.from(e.querySelectorAll("*")).map(n=>[!r||n.tagName.startsWith("FEAAS-")?n:null,n.shadowRoot?this.getElements(n.shadowRoot,r):null]).flat().filter(Boolean)}handleEvent(e){let r=e.composedPath()[0];switch(e.type){case"feaasMount":r!=this&&this.nestedCallback(r);break;case"feaasUnmount":r!=this&&this.unnestedCallback(r);break}}unnestedCallback(e){let r=this.descendants.indexOf(e);r!=-1&&(this.log("FEAAS: Unnest",this,e),this.descendants.splice(r,1),this.refs[e.getComponentName()]=null,e.refs.parent==this&&(e.refs.parent=null),e.refs.top==this&&(e.refs.top=e.refs.parent))}nestedCallback(e){var r,n;if(this.descendants.indexOf(e)==-1&&(this.descendants.push(e),this.log("FEAAS: Nest",this,e),this.refs[e.getComponentName()]=e,e.refs.top=this,(r=e.refs).parent||(r.parent=this),e.render))for(var s=e.refs.parent;s;s=s.refs.parent)s.render&&((n=e.refs).parentReact||(n.parentReact=s),e.refs.topReact=s)}getComponentName(){return this.tagName.replace("FEAAS-","").toLowerCase()}isReadyToLoad(){return this.payload===void 0&&this.getAttribute("hidden")==null}onError(e,r="uncaught",n=!1){let i=new CustomEvent("feaasError",{bubbles:!0,composed:!0,detail:e});if(this.dispatchEventIndirectly(i),this.whenLoaded.reject(e),!i.defaultPrevented&&!n){this.whenRendered.reject(e);try{this.unmount()}catch(s){}return!0}return!1}shouldUpdateOnLoad(){return!0}async advance(){try{if(this.payload===void 0){if(!this.isReadyToLoad())return;this.payload=null,this.dispatchEventIndirectly(new Event("feaasLoad",{bubbles:!0,composed:!0}));let e=await this.load().catch(r=>{throw this.payload=void 0,r});if(this.whenLoaded.resolve(e),this.onLoad)return}else if(this.payload==null)return;this.flush(),this.whenRendered.resolve(this)}catch(e){this.onError(e)}}flush(){var e,r;if(!this.connected)return;let n=(r=(e=this.payload)===null||e===void 0?void 0:e.ReactDOM)===null||r===void 0?void 0:r.flushSync;n?n(()=>this.update()):this.update()}load(){return Promise.resolve(null)}update(){var e,r,n;if(this.payload==null||!this.render)return;let{React:i,ReactDOM:s,ReactDOMClient:o}=this.payload||{};if(!i)throw new Error(`${this.tagName}: React is not present in payload`);if(!s)throw new Error(`${this.tagName}: ReactDOM is not present in payload`);this.getAttribute("hydrate")=="false"&&this.firstElementChild||(!this.refs.topReact&&!this.forceUpdateReact?(this.reactRoot||(this.reactRoot=o.createRoot(this.getReactRootElement())),this.reactRoot.render(this.getReactElement())):this.forceUpdateReact&&this.connected?(e=this.forceUpdateReact)===null||e===void 0||e.call(this):(n=(r=this.refs.topReact)===null||r===void 0?void 0:r.forceUpdateReact)===null||n===void 0||n.call(r))}invokeReactRendering(){let{React:e,ReactDOM:r}=this.payload||{};if(!this.connected)return null;let n=this.descendants.filter(i=>i.refs.parentReact==this&&i.payload&&i.connected).map((i,s)=>this.getReactElement(i));return this.render({...this.props,children:n},this.payload)}getReactErrorBoundary(e=this,r=e.tagName){if(this.reactErrorBoundary)return this.reactErrorBoundary;let{React:n,ReactDOM:i}=e.payload||{};return this.reactErrorBoundary||(this.reactErrorBoundary=class extends n.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromError(o){return{error:o}}componentDidCatch(o,a){console.error(`FEAAS: ${e.tagName} Error:`,o,a),e.onError(o,"react")}render(){if(!this.state.error)return this.props.children}})}getReactElement(e=this,r){let{React:n,ReactDOM:i}=e.payload||{},s=this.getReactErrorBoundary(),o=this.getReactWrapper(e);return n.createElement(s,{key:e.tagName+"-"+e.getUID(),slot:e.getAttribute("slot")},n.createElement(o,null))}getReactWrapper(e=this,r=e.tagName){if(e.reactWrapper)return e.reactWrapper;let{React:n,ReactDOM:i}=e.payload||{};return e.reactWrapper=s=>{if(e.render){let[o,a]=n.useReducer(l=>l+1,0);return e.forceUpdateReact=a,i.createPortal(n.createElement(n.Fragment,null,e.invokeReactRendering()),e.getReactRootElement())}else return e.update()},Object.assign(e.reactWrapper,{key:e.tagName+"-"+e.getUID(),displayName:r}),e.reactWrapper}getUID(){return this.uid||(this.uid=String(Math.random()))}getShadowRoot(){return this.shadowRoot||this.attachShadow({mode:"open"}),this.shadowRoot}getReactRootElement(){return this.useShadowRoot?this.getShadowRoot():this.getRoot()}set(e){try{this.scheduleRender(),this.overrides={...this.overrides,...e},this.props={...this.getProps(),...this.overrides};for(var r in this.props){let i=this.isJSONAttribute(r),s=this.props[r],o=i?JSON.stringify(s):String(s),a=this.defaultProps[r],l=i?JSON.stringify(a):String(a),c=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),d=this.getAttribute(c);try{var n=i?JSON.stringify(JSON.parse(d)):d}catch(p){var n=null}s==null||o===l?this.removeAttribute(c):(typeof s=="string"||typeof s=="number"||typeof s=="boolean"||i)&&n!=o&&this.setAttribute(c,o)}}catch(i){this.whenRendered.reject(i),this.onError(i,"set")}return this}import(e){return import( /*@vite-ignore*/ /* webpackIgnore: true */ e)}scheduleRender(){this.nextRender==null&&(this.whenRendered=this.whenRendered.restart()),this.cancelRender(),this.nextRender=requestAnimationFrame(()=>{this.nextRender=null,this.advance().catch(e=>{})})}cancelRender(){cancelAnimationFrame(this.nextRender)}formatURL(e,r){return typeof e=="string"&&e.match(/^\/[^\/]/)?r+e:e}getContextAttribute(e,r=this){for(var n=this;n=n.parentElement||(n.parentNode instanceof ShadowRoot?n.parentNode.host:null);)if(n.getAttribute(e)!=null)return n.getAttribute(e);return this.getAttribute(e)}static register(e,r){r==null&&(r=typeof window!="undefined"?window:null),r&&!r.customElements.get(e)&&r.customElements.define(e,this)}};var _=class extends x{load(){return Promise.all([import( /*@vite-ignore*/ /* webpackIgnore: true */ "https://cdn.skypack.dev/react"),import( /*@vite-ignore*/ /* webpackIgnore: true */ "https://cdn.skypack.dev/react-dom"),import( /*@vite-ignore*/ /* webpackIgnore: true */ "https://cdn.skypack.dev/react-dom/client")]).then(([e,r,n])=>({React:e,ReactDOM:r,ReactDOMClient:n}))}render({},{React:e}){return e.createElement(e.Fragment,null)}},G=class extends _{constructor(){super(...arguments),this.useShadowRoot=!0}getProps(){return{counter:parseFloat(this.getAttribute("counter"))}}render({counter:e},{React:r}){let[n,i]=r.useState(0);return r.useEffect(()=>{i(s=>s+1)},[e]),r.createElement(r.Fragment,null,r.createElement("p",null,"Rendering attribute: ",e),r.createElement("p",null,"Triggered updates: ",n))}};G.observedAttributes=["counter"];var nt={};j(nt,{renderDOMContent:()=>$,renderDOMElement:()=>w,renderHTMLContent:()=>Vt,setDOMAttribute:()=>N});var Q={};j(Q,{JSONPath:()=>m,queryObject:()=>P,queryObjectRaw:()=>ft,queryScopes:()=>F,serializeCH1RichText:()=>T});import Pt from"vm";var{hasOwnProperty:b}=Object.prototype;function R(t,e){return t=t.slice(),t.push(e),t}function K(t,e){return e=e.slice(),e.unshift(t),e}var Y=class extends Error{constructor(e){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=e,this.name="NewError"}};function m(t,e,r,n,i){if(!(this instanceof m))try{return new m(t,e,r,n,i)}catch(o){if(!o.avoidNew)throw o;return o.value}typeof t=="string"&&(i=n,n=r,r=e,e=t,t=null);let s=t&&typeof t=="object";if(t=t||{},this.json=t.json||r,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=b.call(t,"wrap")?t.wrap:!0,this.sandbox=t.sandbox||{},this.preventEval=t.preventEval||!1,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||n||null,this.otherTypeCallback=t.otherTypeCallback||i||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},t.autostart!==!1){let o={path:s?t.path:e};s?"json"in t&&(o.json=t.json):o.json=r;let a=this.evaluate(o);if(!a||typeof a!="object")throw new Y(a);return a}}m.prototype.evaluate=function(t,e,r,n){let i=this.parent,s=this.parentProperty,{flatten:o,wrap:a}=this;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,r=r||this.callback,this.currOtherTypeCallback=n||this.otherTypeCallback,e=e||this.json,t=t||this.path,t&&typeof t=="object"&&!Array.isArray(t)){if(!t.path&&t.path!=="")throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!b.call(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:e}=t),o=b.call(t,"flatten")?t.flatten:o,this.currResultType=b.call(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=b.call(t,"sandbox")?t.sandbox:this.currSandbox,a=b.call(t,"wrap")?t.wrap:a,this.currPreventEval=b.call(t,"preventEval")?t.preventEval:this.currPreventEval,r=b.call(t,"callback")?t.callback:r,this.currOtherTypeCallback=b.call(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,i=b.call(t,"parent")?t.parent:i,s=b.call(t,"parentProperty")?t.parentProperty:s,t=t.path}if(i=i||null,s=s||null,Array.isArray(t)&&(t=m.toPathString(t)),!t&&t!==""||!e)return;let l=m.toPathArray(t);l[0]==="$"&&l.length>1&&l.shift(),this._hasParentSelector=null;let c=this._trace(l,e,["$"],i,s,r).filter(function(d){return d&&!d.isParentSelector});return c.length?!a&&c.length===1&&!c[0].hasArrExpr?this._getPreferredOutput(c[0]):c.reduce((d,p)=>{let h=this._getPreferredOutput(p);return o&&Array.isArray(h)?d=d.concat(h):d.push(h),d},[]):a?[]:void 0};m.prototype._getPreferredOutput=function(t){let e=this.currResultType;switch(e){case"all":{let r=Array.isArray(t.path)?t.path:m.toPathArray(t.path);return t.pointer=m.toPointer(r),t.path=typeof t.path=="string"?t.path:m.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return m.toPathString(t[e]);case"pointer":return m.toPointer(t.path);default:throw new TypeError("Unknown result type")}};m.prototype._handleCallback=function(t,e,r){if(e){let n=this._getPreferredOutput(t);t.path=typeof t.path=="string"?t.path:m.toPathString(t.path),e(n,r,t)}};m.prototype._trace=function(t,e,r,n,i,s,o,a){let l;if(!t.length)return l={path:r,value:e,parent:n,parentProperty:i,hasArrExpr:o},this._handleCallback(l,s,"value"),l;let c=t[0],d=t.slice(1),p=[];function h(u){Array.isArray(u)?u.forEach(f=>{p.push(f)}):p.push(u)}if((typeof c!="string"||a)&&e&&b.call(e,c))h(this._trace(d,e[c],R(r,c),e,c,s,o));else if(c==="*")this._walk(e,u=>{h(this._trace(d,e[u],R(r,u),e,u,s,!0,!0))});else if(c==="..")h(this._trace(d,e,r,n,i,s,o)),this._walk(e,u=>{typeof e[u]=="object"&&h(this._trace(t.slice(),e[u],R(r,u),e,u,s,!0))});else{if(c==="^")return this._hasParentSelector=!0,{path:r.slice(0,-1),expr:d,isParentSelector:!0};if(c==="~")return l={path:R(r,c),value:i,parent:n,parentProperty:null},this._handleCallback(l,s,"property"),l;if(c==="$")h(this._trace(d,e,r,null,null,s,o));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(c))h(this._slice(c,d,e,r,n,i,s));else if(c.indexOf("?(")===0){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");let u=c.replace(/^\?\((.*?)\)$/u,"$1");this._walk(e,f=>{this._eval(u,e[f],f,r,n,i)&&h(this._trace(d,e[f],R(r,f),e,f,s,!0))})}else if(c[0]==="("){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");h(this._trace(K(this._eval(c,e,r[r.length-1],r.slice(0,-1),n,i),d),e,r,n,i,s,o))}else if(c[0]==="@"){let u=!1,f=c.slice(1,-2);switch(f){case"scalar":(!e||!["object","function"].includes(typeof e))&&(u=!0);break;case"boolean":case"string":case"undefined":case"function":typeof e===f&&(u=!0);break;case"integer":Number.isFinite(e)&&!(e%1)&&(u=!0);break;case"number":Number.isFinite(e)&&(u=!0);break;case"nonFinite":typeof e=="number"&&!Number.isFinite(e)&&(u=!0);break;case"object":e&&typeof e===f&&(u=!0);break;case"array":Array.isArray(e)&&(u=!0);break;case"other":u=this.currOtherTypeCallback(e,r,n,i);break;case"null":e===null&&(u=!0);break;default:throw new TypeError("Unknown value type "+f)}if(u)return l={path:r,value:e,parent:n,parentProperty:i},this._handleCallback(l,s,"value"),l}else if(c[0]==="`"&&e&&b.call(e,c.slice(1))){let u=c.slice(1);h(this._trace(d,e[u],R(r,u),e,u,s,o,!0))}else if(c.includes(",")){let u=c.split(",");for(let f of u)h(this._trace(K(f,d),e,r,n,i,s,!0))}else!a&&e&&b.call(e,c)&&h(this._trace(d,e[c],R(r,c),e,c,s,o,!0))}if(this._hasParentSelector)for(let u=0;u<p.length;u++){let f=p[u];if(f&&f.isParentSelector){let g=this._trace(f.expr,e,f.path,n,i,s,o);if(Array.isArray(g)){p[u]=g[0];let y=g.length;for(let A=1;A<y;A++)u++,p.splice(u,0,g[A])}else p[u]=g}}return p};m.prototype._walk=function(t,e){if(Array.isArray(t)){let r=t.length;for(let n=0;n<r;n++)e(n)}else t&&typeof t=="object"&&Object.keys(t).forEach(r=>{e(r)})};m.prototype._slice=function(t,e,r,n,i,s,o){if(!Array.isArray(r))return;let a=r.length,l=t.split(":"),c=l[2]&&Number.parseInt(l[2])||1,d=l[0]&&Number.parseInt(l[0])||0,p=l[1]&&Number.parseInt(l[1])||a;d=d<0?Math.max(0,d+a):Math.min(a,d),p=p<0?Math.max(0,p+a):Math.min(a,p);let h=[];for(let u=d;u<p;u+=c)this._trace(K(u,e),r,n,i,s,o,!0).forEach(g=>{h.push(g)});return h};m.prototype._eval=function(t,e,r,n,i,s){this.currSandbox._$_parentProperty=s,this.currSandbox._$_parent=i,this.currSandbox._$_property=r,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;let o=t.includes("@path");o&&(this.currSandbox._$_path=m.toPathString(n.concat([r])));let a="script:"+t;if(!m.cache[a]){let l=t.replace(/@parentProperty/gu,"_$_parentProperty").replace(/@parent/gu,"_$_parent").replace(/@property/gu,"_$_property").replace(/@root/gu,"_$_root").replace(/@([.\s)[])/gu,"_$_v$1");o&&(l=l.replace(/@path/gu,"_$_path")),m.cache[a]=new this.vm.Script(l)}try{return m.cache[a].runInNewContext(this.currSandbox)}catch(l){throw new Error("jsonPath: "+l.message+": "+t)}};m.cache={};m.toPathString=function(t){let e=t,r=e.length,n="$";for(let i=1;i<r;i++)/^(~|\^|@.*?\(\))$/u.test(e[i])||(n+=/^[0-9*]+$/u.test(e[i])?"["+e[i]+"]":"['"+e[i]+"']");return n};m.toPointer=function(t){let e=t,r=e.length,n="";for(let i=1;i<r;i++)/^(~|\^|@.*?\(\))$/u.test(e[i])||(n+="/"+e[i].toString().replace(/~/gu,"~0").replace(/\//gu,"~1"));return n};m.toPathArray=function(t){let{cache:e}=m;if(e[t])return e[t].concat();let r=[],i=t.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replace(/[['](\??\(.*?\))[\]']/gu,function(s,o){return"[#"+(r.push(o)-1)+"]"}).replace(/\[['"]([^'\]]*)['"]\]/gu,function(s,o){return"['"+o.replace(/\./gu,"%@%").replace(/~/gu,"%%@@%%")+"']"}).replace(/~/gu,";~;").replace(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replace(/%@%/gu,".").replace(/%%@@%%/gu,"~").replace(/(?:;)?(\^+)(?:;)?/gu,function(s,o){return";"+o.split("").join(";")+";"}).replace(/;;;|;;/gu,";..;").replace(/;$|'?\]|'$/gu,"").split(";").map(function(s){let o=s.match(/#(\d+)/u);return!o||!o[1]?s:r[o[1]]});return e[t]=i,e[t].concat()};m.prototype.vm=Pt;function ft(t,e){try{return m({path:e,json:t})}catch(r){return[]}}function P(t,e,r=!0){let n=ft(t,e)||[];return r?n.flat(1/0):n}function F(t,e,r=!1,n=t,i=!0){var s=e;let o=Object.keys(t).sort((l,c)=>c.length-l.length);for(let l of o)if(e.startsWith(l)){if(l==e){if(r)return t[l];continue}s=e.substring(l.length+1),n=t[l];break}var a=P(n,s,i);return a.length==0&&(a=[s.replace(/^.*?\./,"_."),s.replace(/^.*?\./,""),s.replace(/^([^.]+).*?\.\$([\.\[])/,"$1$2"),s.replace(/^.*?\.\$([\.\[])/,"_$1"),s.replace(/^.*?\.\$([\.\[])/,"$$$1"),s.replace(/^[^.]+$/,"_")].filter((l,c,d)=>d.indexOf(l)===c).reduce((l,c)=>l.length>0?l:P(n,c,i),[])),r?a[0]:a}function X(t,e={},r){return r?`<${r}${Object.entries(e).map(([n,i])=>i!=null&&` ${n}="${i}"`).filter(Boolean).join("")}>${T(t)}</${r}>`.replace(/^<([a-z0-9][^>]*)><\/[^>]+>$/,"<$1 />"):T(t)}function T(t){var e;if(Array.isArray(t))return t.map(T).join(`
`).trim();if(typeof t=="string")return t;if(t==null)return"";switch(t.type){case"heading":let{level:r,...n}=t.attrs;return X(t.content,n,"h"+r);case"text":return(t.marks||[]).reduce((i,s)=>X(i,s.attrs,{link:"a",bold:"strong",italic:"em",strike:"s",underline:"u"}[s.type]),(e=t.text)===null||e===void 0?void 0:e.replace(/\s+/," "));default:return X(t.content||t.text,t.attrs,{bulletList:"ul",orderedList:"ol",listItem:"li",horizontalRule:"hr",paragraph:"p",codeBlock:"code",blockquote:"blockquote"}[t.type])}}var C=class{constructor(e,r=1,n){this.ownerDocument={createElement(i){return new C(i)},createDocumentFragment(){return new C(null,11)}},this.nodeName=e,this.nodeType=r,this.textContent=n,this.attributes=[],this.childNodes=[]}setAttribute(e,r){let n=this.attributes.find(i=>i.name===e);n?n.value=r:this.attributes.push({name:e,value:r})}getAttribute(e){let r=this.attributes.find(n=>n.name===e);return r?r.value:void 0}insertBefore(e,r){if(e.parentNode=this,r===null)this.childNodes.push(e);else{let n=this.childNodes.indexOf(r);n!==-1&&this.childNodes.splice(n,0,e)}}removeAttribute(e){let r=this.attributes.findIndex(n=>n.name===e);r!==-1&&this.attributes.splice(r,1)}appendChild(e){e.parentNode=this,this.childNodes.push(e)}get tagName(){var e;return(e=this.nodeName)===null||e===void 0?void 0:e.toUpperCase()}get localName(){var e;return(e=this.nodeName)===null||e===void 0?void 0:e.toLowerCase()}get innerHTML(){return Z(this.childNodes)}set innerHTML(e){this.childNodes=tt(String(e!=null?e:""))}get outerHTML(){return Z([this])}get children(){return this.childNodes.filter(e=>e.nodeType==1)}closest(e){let r=this;for(;r;){if(pt(e,r))return r;r=r.parentNode}return null}querySelectorAll(e){let r=e.split(/\s*,\s*/),n=[],i=s=>{for(let o of r)if(pt(o,s)){n.push(s);break}for(let o of s.childNodes)i(o)};for(let s of this.childNodes)i(s);return n}querySelector(e){return this.querySelectorAll(e)[0]}findSibling(e,r){if(!this.parentNode)return null;let n=this.parentNode.childNodes,i=n.indexOf(this);if(i===-1)return null;for(let s=i+e;s>=0&&s<n.length;s+=e){let o=n[s];if(!r||o.nodeType===1)return o}return null}removeChild(e){let r=this.childNodes.indexOf(e);if(r!==-1)return this.childNodes.splice(r,1),e.parentNode=void 0,e}get previousSibling(){return this.findSibling(-1)}get nextSibling(){return this.findSibling(1)}get previousElementSibling(){return this.findSibling(-1,!0)}get nextElementSibling(){return this.findSibling(1,!0)}cloneNode(e=!1){let r=new C(this.nodeName,this.nodeType);if(r.attributes=JSON.parse(JSON.stringify(this.attributes)),this.textContent&&(r.textContent=this.textContent),e)for(let n of this.childNodes){let i=n.cloneNode(!0);r.appendChild(i)}return r}get parentElement(){var e;return((e=this.parentNode)===null||e===void 0?void 0:e.nodeType)==1?this.parentNode:null}};function pt(t,e){let r=t.match(/([.#]?[\w-]+|\[([\w-]+)(="([^"]*)")?\])/g);if(!r)return!1;for(let n of r)if(n.startsWith("#")){if(e.getAttribute("id")!==n.slice(1))return!1}else if(n.startsWith(".")){if(!(e.getAttribute("class")||"").split(" ").includes(n.slice(1)))return!1}else if(n.startsWith("[")){let i=n.match(/^\[([\w-]+)(="([^"]*)")?\]$/);if(i){let s=i[1],o=i[3],a=e.getAttribute(s);if(typeof o=="undefined"){if(a===void 0)return!1}else if(a!==o)return!1}else return!1}else if(e.nodeName!==n)return!1;return!0}function tt(t){var e;let r=[],n=[];for(;t;){let i=t.match(/^<([\w-]+)(\s[^>]*)?>/),s=t.match(/^<\/([\w-]+)>/);if(i){let o=i[1].toLowerCase(),l=((e=(i[2]||"").match(/([\w-]+)(="([^"]*)")?/g))===null||e===void 0?void 0:e.map(d=>{let[p,h,,u]=d.match(/([\w-]+)(="([^"]*)")?/);return{name:h,value:Lt(u||"")}}))||[],c=new C(o,1);if(c.attributes=l,n.length>0){let d=n[n.length-1];d.childNodes.push(c),c.parentNode=d}else r.push(c);["img","input","br"].includes(o)||n.push(c),t=t.slice(i[0].length)}else if(s)n.pop(),t=t.slice(s[0].length);else{let o=t.indexOf("<"),a=t.slice(0,o!==-1?o:void 0),l=new C("#text",3);if(l.textContent=a,n.length>0){let c=n[n.length-1];c.childNodes.push(l),l.parentNode=c}else r.push(l);t=t.slice(a.length)}}return r}function Mt(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Lt(t){return t.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'")}function Z(t){return t.map(e=>{if(e.nodeType===3)return e.textContent||"";let{nodeName:r,attributes:n}=e,i=n.map(({name:o,value:a})=>` ${o}="${Mt(String(a))}"`).join(""),s=Z(e.childNodes);return["img","input","br"].includes(r)?`<${r}${i} />`:`<${r}${i}>${s}</${r}>`}).join("")}function kt(t){let e=new t.ownerDocument.defaultView.MutationObserver(r=>{r.forEach(n=>{let i=n.target,s=i.getAttribute("data-embed-src");s&&U(i,s),n.addedNodes&&n.addedNodes.forEach(o=>{o.nodeType==1&&jt(o,!1)})})});return e.observe(t,{attributes:!0,subtree:!0,childList:!0}),e}function jt(t,e=!0){let r=t.querySelectorAll("[data-embed-src]");for(var n=0;n<r.length;n++){let i=r[n];U(i,i.getAttribute("data-embed-src"))}if(e)return kt(t)}function U(t,e){for(var r=t;r;r=r.parentElement)if(!r.parentElement){let i=r.querySelectorAll("script");for(var n=0;n<i.length;n++)if(i[n].getAttribute("src")==e)return!0;r.tagName=="HTML"&&(r=r.querySelector("head")||r);let s=r.ownerDocument.createElement("script");s.setAttribute("type","module"),s.setAttribute("src",e),r.appendChild(s);break}}var rt={};j(rt,{adjustNumbers:()=>Wt,cleanCollectionBit:()=>I,getHumanizedLabel:()=>Ht,getLastPathBit:()=>Bt,getQualifier:()=>It,normalizeCollectionScope:()=>et,parseLimit:()=>Ft,parseRange:()=>Ut});var Ft=t=>{var e;let r=parseInt((e=t==null?void 0:t.match(/\[0:(\d+)\]/))===null||e===void 0?void 0:e[1],10);return!isNaN(r)&&r>0?String(r):null},Ut=t=>{var e;let r=(e=t==null?void 0:t.match(/\[([^\]]+)\]/))===null||e===void 0?void 0:e[1].split(/\s*,\s*/g).filter(Boolean).map(n=>{if(n.match(/^-?\d+$/))return n;let i=n.match(/^(\d+):(\d+)$/);return i&&parseInt(i[1],10)<parseInt(i[2],10)?i[1]+"-"+i[2]:null});return r!=null&&r.every(Boolean)?r.join(","):null},It=t=>{var e;return(e=t==null?void 0:t.match(/(\.\*|\[[^\]]*\])$/))===null||e===void 0?void 0:e[0]};function I(t){return t.replace(/(\.?\[[^\]\[]*\]|\.\*)$/g,"")}function et(t){return I(t)+".*"}function Wt(t,e){return t==null?void 0:t.replace(/(.|^)(\d+)/g,(r,n,i)=>n+(n==":"?i:String(parseInt(i)+e)))}function Ht(t,e=2){var r=I(t).split(/]\.|\.\*\./g).pop().split(/\./g).slice(-3);return r=r.filter(n=>isNaN(parseInt(n))),r.map(n=>n.charAt(0).toUpperCase()+n.slice(1)).slice(-e).join(" ")}function Bt(t){return I(t).split(".").pop()}var Jt=["January","February","March","April","May","June","July","August","September","October","November","December"],mt=t=>{if(!t||typeof t.getDay!="function")return;let e=t.getFullYear(),r=Jt[t.getMonth()],n=t.getDate();return`${r} ${n}, ${e}`},yt=function(t){return String(new Date(t))!=="Invalid Date"&&!isNaN(Number(new Date(t)))};function vt(t){let e=t.getAttribute("data-path-scope");for(var r=0,n=t;n=n.previousElementSibling;)n.getAttribute("data-path-scope")==e&&r++;return r}function zt(t,e,r){let n=t.getAttribute("data-path-scope");if(n==null)return;var i=vt(t);if(i!=0)return;let s=t.parentNode;if(s!=null){e==0?t.setAttribute("hidden","hidden"):t.getAttribute("hidden")!=null&&t.removeAttribute("hidden");for(var o=i+1,a=t,l=t;l=l.nextElementSibling;)l.getAttribute("data-path-scope")==n&&(o++,a=l);for(var c=o;c<e;c++)s.insertBefore(a.cloneNode(!0),a.nextElementSibling);for(var c=Math.max(1,e);c<o;c++)a=a.previousElementSibling,s.removeChild(a.nextElementSibling)}}function N(t,e,r,n){var i,s,o;if(!t)return;var a=t;(r==null?void 0:r.type)=="doc"&&Array.isArray(r.content)&&(r=T(r)),n!=null&&n.processValue&&(r=n==null?void 0:n.processValue(t,e,r));var l=e.replace("data-path-","");if(e=="data-path-src"||e=="data-path-alt"){let y=Array.from(t.children).find(A=>A.localName=="picture")||t;a=t.localName=="img"?t:y.querySelector("img, video")}else if(e=="data-path-href")a=t.querySelector("a")||t.closest("a");else if(e=="data-path-hidden")r=r?null:!0;else if(e=="data-path"||e=="data-embed-html"||e=="html")l="innerHTML";else if(e=="data-embed-src")U(t,r);else if(e=="data-path-attributes"){if(!Array.isArray(r)){let y=((i=t.getAttribute("data-attributes-keys"))===null||i===void 0?void 0:i.split(",").filter(Boolean))||[];if(!Array.isArray(r))for(var c in r){var d=r[c];N(t,c,typeof d=="object"&&d?JSON.stringify(d):d,n)}for(var p=0;p<y.length;p++)(r==null||!(y[p]in r))&&N(t,y[p],null,n);N(t,"data-attributes-keys",Object.keys(r||{}).join(","))}if(t.tagName=="FEAAS-EXTERNAL"){let y=String(t.getAttribute("data-path-attributes")||"").slice(0,-1).split(".")[0]||"_";N(t,"datasources",JSON.stringify({[y]:r}))}return}if(typeof r=="boolean"&&(r=r?"":null),!a)return;if((l=="innerHTML"||l=="src")&&(r==null||r==="")){var u=String((o=(s=t.getAttribute("data-path-placeholder")||a[l])!==null&&s!==void 0?s:a.getAttribute(l))!==null&&o!==void 0?o:"");l=="innerHTML"?a.innerHTML=u:u?a.setAttribute(l,u):a.removeAttribute(l)}else if(r!=null)if(l=="innerHTML"){for(var f=String(r),g=a;g.parentElement&&g.localName.match(/^(a|var|strong|em|i|b)$/);)g=g.parentElement;g.localName.match(/p|h\d|button|time|li/)&&(f=f.replace(/<(p|h\d|li|ul)[^>]*?>|<\/(p|h\d|li|ul)[^>]*?>/g," ").trim().replace(/\s+/g," ")),String(g.getAttribute("class")).includes("-inline--time")&&yt(f)&&(f=mt(new Date(f))),a.innerHTML!=f&&(a.innerHTML=f)}else a.getAttribute(l)!=r&&a.setAttribute(l,r);else a.removeAttribute(l)}var gt=["data-attributes-keys","data-path-attributes","data-path-scope"];function w(t,e,r,n){var i,s,o;let a=t;if(n||(e=((i=r==null?void 0:r.processData)===null||i===void 0?void 0:i.call(r,a,e))||e),a.nodeType==1){let d=a.getAttribute("data-path-scope");if(d){let h=vt(a),u=F(e,d,!1);h==0&&zt(a,((s=r==null?void 0:r.shouldRepeat)===null||s===void 0?void 0:s.call(r,a,u))===!1?1:u.length,r),e={...e,[et(d)]:u[h]}}let p=Array.prototype.slice.call(a.attributes).sort((h,u)=>gt.indexOf(h.name)-gt.indexOf(u.name));for(var l=0;l<p.length;l++){let{name:h,value:u}=p[l];h.startsWith("data-path")&&h!="data-path-scope"&&N(a,h,F(e,u,!0,void 0,a.tagName!="FEAAS-EXTERNAL"),r),h=="data-embed-src"&&N(a,h,a.getAttribute(h),r)}}for(var l=0,c;c=a.childNodes[l++];)bt(c)&&w(c,e,r,!0);return n||(o=r==null?void 0:r.onRender)===null||o===void 0||o.call(r,a,e),a}function bt(t){return t.nodeType==1}function $(t,e,r,n){var i;let s=((i=n==null?void 0:n.processTemplate)===null||i===void 0?void 0:i.call(n,t,e,r))||e;if(t.innerHTML=s,t.classList.add("-feaas"),(t.closest(".component.feaas")||t).className.includes("-theme--"))for(var a=0,l;l=t.childNodes[a++];)bt(l)&&(l.className=l.className.replace(/(\s|^)-theme--[^\s]+\s*/g,"$1"));return w(t,r,n)}function Vt(t,e,r,n=!1){var i;let s=((i=r==null?void 0:r.processTemplate)===null||i===void 0?void 0:i.call(r,null,t,e))||t;if(typeof document=="undefined"||n){let o=tt(s);return w(o[0],e,r).outerHTML}else{let o=document.createElement("div");return o.innerHTML=s,w(o,e,r),o.innerHTML}}var At=["initial","check","updated"],W={};function _e(){W={}}async function H(t,e,r,n,i=W){return O({url:t,options:e,validator:r,callback:n,cache:i}).then(B).then(s=>s.response)}async function O({url:t,options:e,validator:r,callback:n,cache:i},s="initial"){let o=new Date;if(i!=null){var a=qt(t);if(At.indexOf(a.phase)>=At.indexOf(s))var l=a[s];else a.phase=s}let c=await(l||fetch(t,e));if(!l&&a&&(c.ok?a[s].resolve(c):a[s].reject(new Error("Fetch failed"))),!c.ok)throw new Error("Fetch failed");let d=new Date(c.headers.get("date"))<o||l&&s=="initial"&&(a.phase=="updated"||a.phase=="check");if((r==null?void 0:r(c,d))===!1)throw new it("Response is not valid");return await(n==null?void 0:n(c,s,d)),{url:t,options:e,isCached:d,response:c,validator:r,callback:n,cache:i}}function qt(t,e=!1){let r=String(t).replace("?head","");var n=W[r];return!n&&!e&&(n=W[r]={phase:null,initial:S(),check:S(),updated:S(),final:S()}),n}var it=class extends Error{};async function B(t){let{url:e,isCached:r,options:n,validator:i,response:s,cache:o}=t;if(r){let{response:a}=await O({url:e+(e.toString().includes("?")?"&":"?")+"head",options:{...n,method:"HEAD",cache:"no-cache"},validator:i,cache:o},"check");if(a.headers.get("last-modified")!=s.headers.get("last-modified"))return st(t)}return t}async function st(t){return O({...t,options:{...t.options,cache:"reload"}},"updated")}var E="https://feaas.blob.core.windows.net";function J(t){let e=t==null?void 0:t.match(/^(?:(.*?)\/components)?\/?([^\/]+)\/([^\/]+)(?:\/([^\/]+)(?:\/(published|staged|saved|\d+)(?:\.html?)?)?)?$/);if(e){var[,r,n,i,s,o]=e;return{cdn:r,library:n,component:i,version:s,revision:o}}}function Oe(t){if(!t||!t.library||!t.component)throw new Error("Component requires `library` and `component` properties");return`${t.cdn&&t.cdn!=E?`${t.cdn}/components`:""}/${t.library}/${t.component}/${!t.version||t.version=="responsive"&&(!t.revision||t.revision=="published")?"":t.version}/${!t.revision||t.revision=="published"?"":t.revision}`.replace(/(^\/|\/$|\/\/)(?!.+\/components\/)/g,"")}function De(t){return`${t.cdn&&t.cdn!=E?`${t.cdn}/styles/`:""}${t.library}/${!t.revision||t.revision=="published"?"":t.revision}`.replace(/\/$|\/\/(?!.+\/styles\/)/g,"")}function M(t){let e=t==null?void 0:t.match(/^(?:(.*?)\/styles\/)?([^\/]+)(?:\/(published|staged|saved|\d+)(?:.css)?)?$/);if(e){var[,r,n,i]=e;return{cdn:r,library:n,revision:i}}else{let s=J(t);if(s){var{cdn:r,library:n,revision:i}=s;return i!=null&&i.match(/\d/)&&(i=void 0),{cdn:r,library:n,revision:i}}}}function wt(t){return typeof t=="string"&&(t={src:t}),"src"in t&&t.src?t={...J(t.src)}:t={...t},`${t.cdn||t.hostname||E}/components/${t.library}/${t.component}/${t.version||"responsive"}/${t.revision||"published"}.html`}function z(t){if(typeof t=="string"&&(t={src:t}),"src"in t){if(String(t.src).includes("v1/files/components/styles"))return t.src;t={...M(t.src)}}else t={...t};return`${t.cdn||t.hostname||E}/styles/${t.library}/${t.revision=="staged"?"staged":t.revision=="saved"?"saved":"published"}.css`}async function L(t,e,r=!1){let n=a=>a.headers.get("x-ms-meta-versionDeletedAt")==null,i=a=>a.clone().text().then(e),s=await Promise.all([t.instance&&O({options:{headers:{Accept:"text/html"},credentials:"omit"},url:wt({...t,version:t.instance}),validator:n}).catch(a=>a),O({url:wt(t),validator:n}).catch(a=>a)]),o=s.find(a=>a&&"isCached"in a&&a);if(!o||o instanceof Error)throw s.find(l=>l&&l instanceof Error)||new Error("Can not fetch component");return s[0]==o&&console.log("Using fork!",s),await i(o.response),r?o:B({...o,callback:i}).catch(a=>{if(s[0]==o&&(st({...o,callback:null,validator:null}),console.log("Fork was deleted"),!(s[1]instanceof Error)))return i(s[1].response),B({...s[1],callback:i});throw a})}async function Pe(t){typeof t=="string"&&(t={src:t});var e;let{response:r}=await L(t,n=>{e=n},!0);return{...t,template:e,lastModified:r.headers.get("last-modified")}}async function ot(t,e){return H(z(t),{headers:{Accept:"text/css"},credentials:"omit"},r=>r.headers.get("x-ms-meta-deletedAt")==null,(r,n)=>r.clone().text().then(i=>e(i,n)))}function ke(t,e){return Gt(t,e||(e=document.createElement("style"))),e}function Gt(t,e){return e||(e=document.createElement("style")),ot(t,(r,n)=>{e.textContent=r}).then(()=>e)}var Kt=new WeakSet;function at(t,e){var r,n=Yt(t);if(n){if(Kt.has(n))return Promise.resolve(n);t=n.getAttribute("data-href")||n.getAttribute("href")}return ot(t,(i,s)=>{s=="initial"&&n||(r||(r=!n||n.tagName=="LINK"?Xt(t):n),r.textContent=i),e==null||e(i,s)}).then(()=>r||n)}function St(t){return new Promise((e,r)=>{at(t,e).catch(r)})}function Yt(t){let e=z(t),{library:r}=M(e),n=`/files/components/styles/${r}.css`;return document.querySelector(`style[data-href="${e}"], 
    link[rel="stylesheet"][href="${e}"], 
    style[data-href*="${n}"], 
    link[rel="stylesheet"][href*="${n}"]`)}function Xt(t){let e=z(t),r=document.createElement("style");return r.setAttribute("data-href",e),document.head.appendChild(r),r}function Ie(t,e){let r=document.createElement("div");r.innerHTML=t;let n=document.createDocumentFragment();for(;r.firstChild;)n.appendChild(r.firstChild);return w(n,e),r}function xt(t,e){return Qt(t,e||(e=document.createElement("div"))),e}async function Qt(t,e){return e||(e=document.createElement("div")),e.childNodes.length?w(e,t.data,t):"template"in t?$(e,t.template,t.data,t):L(t,r=>$(e,r,t.data,t)).then(()=>e)}import{customizeDataSettings as Zt}from"@sitecore/byoc";function te(t){let{params:e,method:r,headers:n,body:i,url:s}=v(t);var o={url:s},a={...n};return n["Content-Type"]==="application/json"&&delete a["Content-Type"],n.Accept==="application/json"&&delete a.Accept,Object.keys(a).length>0&&(o.headers=a),r!=="GET"&&(o.method=r),r==="GET"||r==="HEAD"||Object.keys(i).length===0||(o.body=i),Object.keys(e).length>0&&(o={...o,params:e}),o}var D=t=>{if(!t||typeof t.url!="string")return!1;for(var e in t)if(!(e=="body"||e=="params"||e=="headers"||e=="url"||e==="method"||e=="jsonpath"&&typeof t[e]=="string"))return!1;return!0};function Et(t){let{url:e,headers:r,params:n,method:i,body:s}=v(t),o,a=r["Content-Type"];i!="GET"&&i!="HEAD"&&(a==="application/json"&&(o=JSON.stringify(s)),a==="multipart/form-data"&&(o=Object.keys(s).reduce((c,d)=>(c.append(d,s[d]),c),new FormData)),a==="application/x-www-form-urlencoded"&&(o=new URLSearchParams(s)));let l=Object.keys(n).length?`?${new URLSearchParams(n)}`:"";return[`${e}${l}`,{headers:r,body:o,method:i}]}function v(t){let e={};for(let r in(t==null?void 0:t.headers)||{})if(t.headers.hasOwnProperty(r)){let n=r.replace(/^[a-z]|\-[a-z]/g,i=>i.toUpperCase());e[n]=t.headers[r]}return e.Accept||(e.Accept="application/json"),{params:(t==null?void 0:t.params)||{},headers:e,jsonpath:String((t==null?void 0:t.jsonpath)||"$"),method:((t==null?void 0:t.method)||"GET").toUpperCase(),body:(t==null?void 0:t.body)||{},url:String((t==null?void 0:t.url)||"")}}var lt=async(t,e)=>{let r=Zt(e,t);if(r instanceof Promise)return r;let n=t;r&&(n=v(r));try{let[i,s]=Et(n),a=await(await v.fetchImplementation(i,{...s,method:s.method.toLowerCase()})).json();return n.jsonpath&&n.jsonpath!="$"?P(a,n.jsonpath):a}catch(i){return{}}};async function Ct(t){if(!t)return t;if(D(t))return lt(t);let e=Object.keys(t),r=await Promise.all(e.map(n=>D(t[n])?lt(t[n],n):null).filter(Boolean));return e.reduce((n,i)=>({...n,[i]:D(t[i])?r.shift():t[i]}),{})}function ee(t){return t?D(t)||Object.values(t).some(D):!1}v.clean=te;v.toFetchArguments=Et;v.fetchOne=lt;v.fetch=Ct;v.isDataSettings=D;v.hasDataSettings=ee;v.fetchImplementation=(...t)=>fetch(...t);function re(t){var e,r,n,i,s,o,a,l;let c,d=t.getAttribute("src");if(d){let k=J(d);if(!k)throw new Error(`Could not parse FEAAS Component source: ${d}`);var{cdn:p,library:h,component:u,version:f,revision:g}=k}let y=t.getAttribute("data");if(y!=null&&y!="")try{c=typeof y=="string"?JSON.parse(y):{}}catch(k){console.error(k)}let A=t.getAttribute("fetch");return{data:c||{},cdn:(r=(e=t.getContextAttribute("cdn"))!==null&&e!==void 0?e:p)!==null&&r!==void 0?r:E,library:(n=t.getAttribute("library"))!==null&&n!==void 0?n:h,component:(i=t.getAttribute("component"))!==null&&i!==void 0?i:u,version:(o=(s=t.getAttribute("version"))!==null&&s!==void 0?s:f)!==null&&o!==void 0?o:"responsive",revision:(l=(a=t.getAttribute("revision"))!==null&&a!==void 0?a:g)!==null&&l!==void 0?l:"published",hostname:t.getAttribute("hostname"),template:t.getAttribute("template"),instance:t.getAttribute("instance"),editable:t.getAttribute("editable")!=null,suspended:t.getAttribute("suspended")!=null,lastModified:t.getAttribute("last-modified"),fetch:A=="false"||A==null&&t.hasAttribute("fetch")?[]:A==null||A=="true"?["data","template","stylesheet"]:A.split(/(\s+|\-)+/g).filter(Boolean)}}var V=class extends x{setData(e){this.set({data:e})}getProps(){return re(this)}isJSONAttribute(e){return e=="data"}attributeChangedCallback(e,r,n){r!==n&&((e=="library"||e=="component"||e=="revision"||e=="version")&&(this.payload=void 0,this.alreadyRendered&&this.connected&&(this.needsRefresh=!0,this.needsToFetchTemplate=!0)),super.attributeChangedCallback(e,r,n),e=="data"&&(this.needsRefresh=!0,(this.props.fetch.includes("data")||this.alreadyRendered||!v.hasDataSettings(this.props.data))&&this.fetchData()))}async fetchData(){this.readyData=void 0,this.whenDataReady=this.whenDataReady.restart();let e=await v.fetch(this.props.data),r=this.alreadyRendered;await this.whenDataReady.resolve(e),r&&this.advance()}getEditor(){var e;return(e=document.querySelector("feaas-context"))===null||e===void 0?void 0:e.refs.editor}constructor(){super(),this.readyData={},this.whenDataReady=S(r=>this.readyData=r,r=>this.onError(r)),this.defaultProps={cdn:E,revision:"published",version:"responsive",editable:!1,suspended:!1,data:{}},this.onLoad=r=>{this.payload=r,this.advance()};let e=this.getAttribute("data");this.getAttribute("data")||this.whenDataReady.resolve({}),this.addEventListener("click",()=>{this.props.editable&&this.edit()})}edit(){let e=this.getEditor();if(e!=null&&e.setTarget(this))return e.open(),!0}getOriginal(){let e=this.getAttribute("data-path-scope");if(e){for(var r=this;(r=r.previousElementSibling)&&r.getAttribute("data-path-scope")==e;)var n=r;return n}}isReadyToLoad(){return super.isReadyToLoad()&&this.props.library!=null&&this.props.component!=null&&this.props.version!=null}async load(){var e;if(this.getOriginal())return;let r=()=>{this.payload!=null&&(n||this.readyData&&this.onLoad(this.payload))};if(this.props.fetch.includes("stylesheet"))var n=St({...this.props}).then(()=>{n=null,r()});if(this.props.fetch.includes("template")||this.needsToFetchTemplate){this.needsToFetchTemplate=!1;var i=L(this.props,s=>{this.payload=s,this.needsRefresh=!0,r()})}else this.payload=(e=this.props.template)!==null&&e!==void 0?e:this.innerHTML;return Promise.all([n,this.whenDataReady.then(()=>r()),i]).then(()=>this.payload)}flush(){this.readyData&&super.flush()}update(){if(this.alreadyRendered=!0,!(!this.props.fetch.includes("data")&&!this.props.fetch.includes("template")&&this.firstElementChild&&!this.needsRefresh))if(Array.from(this.children).filter(e=>e.tagName!="BR").length>0&&!this.needsRefresh)w(this,this.readyData);else{if(this.needsRefresh=!1,this.getOriginal())return;$(this,this.payload,this.readyData)}}};V.observedAttributes=["library","component","version","revision","hostname","cdn","template","data","instance","editable","with-stylesheet","fetch"];V.register("feaas-component");function ne(t){return{opacity:t!=null&&t.getAttribute("opacity")?parseFloat(t==null?void 0:t.getAttribute("opacity")):1,hidden:(t==null?void 0:t.getAttribute("hidden"))!=null}}var q=class extends x{constructor(){super(...arguments),this.defaultProps={hidden:!1}}getProps(){return ne(this)}attributeChangedCallback(e,r,n){if(r!==n)return e=="hidden"&&(this.style.setProperty("display","block","important"),this.style.setProperty("transition","opacity 0.3s","important"),n?(this.style.setProperty("opacity","0","important"),this.style.pointerEvents="none"):(this.style.setProperty("opacity","1","important"),this.style.pointerEvents="all")),super.attributeChangedCallback(e,r,n)}connectedCallback(){this.payload=null,super.connectedCallback(),this.attributeChangedCallback("hidden",this.getAttribute("hidden"),this.getAttribute("hidden")),this.stylesheet=document.createElement("style"),this.stylesheet.textContent=`
  #loader {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f6f6ff;
    z-index: 1000;
  }
  @keyframes loader-circular-track {
    0% {
      stroke-dasharray: 1, 400;
      stroke-dashoffset: 0;
    }
    50% {
      stroke-dasharray: 400, 400;
      stroke-dashoffset: -100;
    }
    100% {
      stroke-dasharray: 400, 400;
      stroke-dashoffset: -260;
    }
  }
  
  @keyframes loader-circular-spinner {
    0% {
      transform: rotate(0deg);
    }
  
    100% {
      transform: rotate(360deg);
    }
  }
  #loader .spinner {
    width: 48px;
    height: 48px;
  }
  `,this.loader=document.createElement("div"),this.loader.id="loader",this.loader.innerHTML=`
  <div class="spinner">
    <svg
      viewBox="0 0 100 100"
      style="
        animation: 2s linear 0s infinite normal none running loader-circular-spinner;
        display: block;
        width: 48px;
        height: 48px;
      "
    >
      <circle fill="transparent" cx="50" cy="50" r="42" stroke="rgba(0,0,0,0.1)" stroke-width="10px"></circle>
      <circle
        fill="transparent"
        stroke="#5548D9"
        cx="50"
        cy="50"
        r="42"
        stroke-width="10px"
        stroke-linecap="round"
        style="animation: 1.5s linear 0s infinite normal none running loader-circular-track"
      ></circle>
    </svg>
  </div>`,this.getRoot().appendChild(this.stylesheet),this.getRoot().appendChild(this.loader)}update(){this.loader.style.opacity=String(this.props.opacity)}};q.observedAttributes=["hidden","opacity"];q.register("feaas-loader");function ie(t){var e,r,n,i;let s=t.getAttribute("src");if(s)var{cdn:o,library:a,revision:l}=M(s);return{library:t==null?void 0:t.getContextAttribute("library"),revision:(r=(e=t==null?void 0:t.getAttribute("revision"))!==null&&e!==void 0?e:l)!==null&&r!==void 0?r:"published",cdn:(i=(n=t==null?void 0:t.getContextAttribute("cdn"))!==null&&n!==void 0?n:t==null?void 0:t.getContextAttribute("hostname"))!==null&&i!==void 0?i:E}}var ct=class extends x{constructor(){super(...arguments),this.onLoad=e=>{this.payload=e,this.advance()}}getProps(){return ie(this)}isReadyToLoad(){return this.props.library!=null&&this.props.revision!=null&&this.props.cdn!=null}load(){return at(this.props,this.onLoad)}};ct.register("feaas-stylesheet");var ut={};j(ut,{convertBase64toBlob:()=>Rt,generate:()=>Tt,get:()=>se,getVersionForThumbnail:()=>Nt,load:()=>_t,responseToImage:()=>dt,upload:()=>$t});var Rt=t=>fetch(t).then(e=>e.blob()),dt=t=>t.blob().then(e=>new Promise((r,n)=>{let i=new Image;i.onerror=n,i.onload=()=>{r(i)},i.src=URL.createObjectURL(e)}));async function Nt(t){return t.versions.length||await t.versions.fetch(),t.getVersionForWidth(800)}async function se(t,e,r){try{if(!t.isNew)return await _t(t,e,r)}catch(i){t.sdk.log(`FEAAS: Thumbnail ${t.id}, version: ${(e==null?void 0:e.id)||"responsive"}, status: generating ${status}, reason: ${i}`)}let n=await Tt(t,e);return r==null||r(n,!1),n&&!t.isNew&&Rt(n.src).then(i=>$t(t,e,i)),n}async function _t(t,e,r){let n=e?e.getThumbnailURL():t.getThumbnailURL(),i=t.library.stylesheet,s=new Date(Math.max(Number(t.modifiedAt),Number(i.modifiedAt)));t.sdk.log(`FEAAS: Thumbnail ${t.id}/${(e==null?void 0:e.id)||"responsive"}, loading`);var o;return await H(n,{},(a,l)=>{let c=Math.abs(Number(new Date(a.headers.get("x-ms-meta-componentRenderedAt")))-Number(s))<2e3;return l&&!c&&dt(a).then(d=>{o=d,r(d,l)}),c},(a,l,c)=>{t.sdk.log(`FEAAS: Thumbnail ${t.id}/${(e==null?void 0:e.id)||"responsive"}, status: ${l}`),dt(a).then(d=>{o=d,r(d,c)})},null),o}async function Tt(t,e,r){let n=e||(t.isNew?null:await Nt(t));if(!n||n.isViewEmpty())return null;let i=r||t.library.stylesheets.first,{datasources:s}=t.sdk;return await oe(n.classList,i.getBreakpointForWidth(800,n.getBreakpoints()),n.view,s.reduce((a,l)=>Object.assign(a,{[l.id]:l.sample}),{}),i.css,t.sdk)}function oe(t,e,r,n,i,s){let o=document.createElement("iframe");return o.style.position="absolute",o.style.top="-2000px",o.style.left="-2000px",o.style.width=e.props.minWidth+"px",o.style.height="720px",o.style.zIndex="100011",document.body.appendChild(o),new Promise((a,l)=>{let c=document.createElement("script");c.onerror=l,c.src=s.frontend+"/assets/html2canvas.js",c.onload=()=>{var u;(((u=o.contentWindow.document.fonts)===null||u===void 0?void 0:u.ready)||Promise.resolve()).then(function(){return o.contentWindow.html2canvas(h,{scale:Math.max(1.1,1e3/Math.min(1401,Math.max(320,e.props.minWidth))),width:Math.min(1401,Math.max(320,e.props.minWidth)),height:Math.max(1,Math.min(2e3,h.offsetHeight)),windowWidth:e.props.minWidth||e.props.maxWidth+"px",windowHeight:1e3,proxy:s.backend+"/proxy/media",backgroundColor:"#ffffff"}).then(f=>{let g=f.toDataURL("image/jpeg",.6);o.parentElement.removeChild(o);let y=new Image;y.onload=()=>{a(y)},y.onerror=l,y.src=g})})},o.contentWindow.document.head.appendChild(c);let d=o.contentWindow.document.createElement("style");d.textContent=`
      ${i}
      body, html { padding: 0; margin: 0; overflow: hidden }
    `;let p=o.contentWindow.document.createElement("style");p.textContent=`
      body, html { padding: 0; margin: 0; overflow: hidden }
    `,o.contentWindow.document.head.appendChild(d),o.contentWindow.document.head.appendChild(p);let h=xt({template:r,data:n});h.classList.add(...t,"-feaas--preview","-emulate--"+e.details.slug),o.contentWindow.document.body.appendChild(h)})}async function $t(t,e,r){let n=e?e.getThumbnailURL():t.getThumbnailURL(),i=new Date(Math.max(Number(t.modifiedAt),Number(t.library.stylesheet.modifiedAt)));try{await t.sdk.uploadBlob("thumbnails",n.split(/\/thumbnails\//)[1],r,{headers:{"x-ms-blob-content-type":"image/jpg","x-ms-blob-cache-control":"public,max-age=31536000,immutable","x-ms-meta-versionId":e?e.id:null,"x-ms-meta-versionRevision":e?e.revision.toString():null,"x-ms-meta-componentId":t.id,"x-ms-meta-componentRenderedAt":i.toUTCString(),"x-ms-meta-componentModifiedAt":t.modifiedAt.toUTCString(),"x-ms-meta-componentCreatedAt":t.createdAt.toUTCString(),"x-ms-meta-modifiedAt":t.modifiedAt.toUTCString()}}),fetch(n,{cache:"no-cache"}).then(()=>{t.sdk.log("FEAAS: Thumbnail uploaded",n)})}catch(s){t.sdk.log("FEAAS: Thumbnail failed to upload",n,s)}return n}import{registerDatasource as Er,registerComponent as Cr,getComponent as Rr,customizeDataSettings as Nr}from"@sitecore/byoc";var ht;typeof window!="undefined"&&(window.FEAASReactElement=_,(ht=window.FEAASLoading)!==null&&ht!==void 0||(window.FEAASLoading=Promise.resolve()));export{V as Component,re as ComponentProps,S as ControlledPromise,E as DEFAULT_CDN_URL,nt as DOM,rt as DataPath,Q as DataScope,v as DataSettings,x as Element,V as FEAASComponent,re as FEAASComponentsProps,x as FEAASElement,q as FEAASLoader,ne as FEAASLoaderProps,ct as FEAASStylesheet,ie as FEAASStylesheetProps,it as InvalidResponse,m as JSONPath,q as Loader,G as MyComponent,ct as Stylesheet,ut as Thumbnail,Dt as WebComponent,Wt as adjustNumbers,jt as autoloadScripts,I as cleanCollectionBit,_e as clearFetchCache,Xt as createStylesheet,Nr as customizeDataSettings,H as fetchAndRevalidate,L as fetchAndRevalidateComponent,ot as fetchAndRevalidateStylesheet,st as fetchBypassingCache,W as fetchCache,Pe as fetchComponent,Ct as fetchData,B as fetchToValidateCache,O as fetchWithCacheAwareness,Yt as findStylesheet,Rr as getComponent,Oe as getComponentSource,wt as getComponentURL,qt as getFetchCache,Ht as getHumanizedLabel,Bt as getLastPathBit,It as getQualifier,De as getStylesheetSource,z as getStylesheetURL,U as loadScript,at as loadStylesheet,St as loadStylesheetAllowStale,et as normalizeCollectionScope,kt as observeDOMElement,J as parseComponentSource,Ft as parseLimit,Ut as parseRange,M as parseStylesheetSource,P as queryObject,ft as queryObjectRaw,F as queryScopes,Cr as registerComponent,Er as registerDatasource,xt as renderComponent,Ie as renderComponentElement,Qt as renderComponentPromise,$ as renderDOMContent,w as renderDOMElement,Vt as renderHTMLContent,ke as renderStylesheet,Gt as renderStylesheetPromise,T as serializeCH1RichText,N as setDOMAttribute};
//# sourceMappingURL=headless.esm.js.map
