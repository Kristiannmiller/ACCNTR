var P=(e={})=>Object.keys(e).reduce((t,r)=>Object.assign(t,{[b(r)]:e[r]}),{}),ie=(e={})=>Object.keys(e).reduce((t,r)=>Object.assign(t,{[O(r)]:e[r]}),{});function b(e){let t=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g;return O(e).replace(t,function(r){return"-"+r.toLowerCase()})}function O(e){return e=e.replace(/[-_ ]+/g," "),e=e.charAt(0).toLowerCase()+e.slice(1),e.split(/\s+/).map((t,r)=>r===0?t:t.charAt(0).toUpperCase()+t.slice(1)).join("")}var S=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};function z(e,{name:t}){if(t.charAt(0)!=t.charAt(0).toUpperCase())throw new Error("Custom types must start with a capital letter");h[t]=e}var h={},Y=()=>({type:"object",properties:{href:{required:!0,type:"string",title:"URL",description:"The URL of the link, except for media items, for which the Url property contains the path to the media item relative to /Sitecore/Media Library."},text:{type:"string",title:"Text",description:"The text content of the HTML <a> element."},linktype:{type:"string",enum:["internal","external","media","anchor","mailto","javascript"],default:"internal",title:"Target",description:"The target attribute of the HTML <a> element."},title:{type:"string",title:"Title",description:"The title attribute of the HTML <a> element."},class:{type:"string",title:"Class Name",description:"The class attribute of the HTML <a> element."},target:{type:"string",title:"Target",description:"The target attribute of the HTML <a> element.",enum:["","_blank","_self","_parent","_top"]},anchor:{type:"string",title:"Anchor",description:"The name attribute of the HTML <a> element, without the leading hash character (\u201C#\u201D)."},querystring:{type:"string",title:"Query String",description:"Query string parameters to add to the URL."}}}),C=e=>{var{properties:t}=e,r=S(e,["properties"]);return Object.assign(Object.assign({},r),{type:"object",properties:{name:{type:"string"},displayName:{type:"string"},id:{type:"string"},url:{type:"string"},fields:M(t)}})};function M(e={}){return{type:"object",properties:Object.keys(e).reduce((t,r)=>{let i=e[r],{title:o}=i,c=S(i,["title"]);return Object.assign(Object.assign({},t),{[r]:{type:"object",properties:{value:Object.assign({title:o||r},e[r])}}})},{})}}var A={Link:Y,DropLink:C,DropTree:C,File:()=>({type:"object",properties:{src:{type:"string",title:"Source",description:"The URL of the file."},title:{type:"string",title:"Title",description:"Title of a file"},displayName:{type:"string",title:"Display name",description:"Display name of a file"}}}),Date:()=>({type:"string",format:"date"}),Datetime:()=>({type:"string",format:"date-time"}),RichText:()=>({type:"string"}),Image:e=>({type:"object",properties:Object.assign({src:{type:"string"}},e.properties)}),SingleLineText:()=>{},MultiLineText:()=>({type:"string"}),Checkbox:()=>({type:"boolean"}),String:()=>({type:"string"}),Number:()=>({type:"number"}),Boolean:()=>({type:"boolean"}),Item:C,List:e=>{var{properties:t}=e,r=S(e,["properties"]);return Object.assign(Object.assign({},r),{type:"array",items:{type:"object",properties:{name:{type:"string"},displayName:{type:"string"},id:{type:"string"},url:{type:"string"},fields:M(t)}}})}};Object.keys(A).forEach(e=>{z(A[e],{name:e})});function T(e,t){var r={};for(var i in e){let o=e[i];o&&typeof o=="object"?Array.isArray(o)?r[i]=o.map(c=>typeof c=="object"&&c?T(c,t):c):r[i]=T(t(o),t):r[i]=e[i]}return r}function v(e,t={}){return e=N(Object.assign({type:"object",properties:{},required:[]},e)),T(e,r=>r.properties?N(r,t):r)}function N(e,t={}){var r;let i=Object.assign({},e);return i.properties&&(i.required=((r=e.required)===null||r===void 0?void 0:r.slice())||[],i.properties=Object.keys(i.properties).reduce((o,c)=>{var a;let n=i.properties[c],s=(a=h[n==null?void 0:n.type])===null||a===void 0?void 0:a.call(h,n),l=Object.assign(Object.assign(Object.assign({},s),n),{type:(s==null?void 0:s.type)||n.type,default:t.hasOwnProperty(c)?t[c]:n.default,title:n.title||b(c).split("-").map(d=>d.charAt(0).toUpperCase()+d.slice(1).toLowerCase()).join(" ")});return(n!=null&&n.properties||s!=null&&s.properties)&&(l.properties=Object.assign({},(s==null?void 0:s.properties)||(n==null?void 0:n.properties)),Object.keys((s==null?void 0:s.properties)||{}).forEach(d=>{var f,u;l.properties[d]=Object.assign(Object.assign({},(f=s==null?void 0:s.properties)===null||f===void 0?void 0:f[d]),(u=n==null?void 0:n.properties)===null||u===void 0?void 0:u[d])})),(n!=null&&n.items||s!=null&&s.items)&&(l.items=(s==null?void 0:s.items)||(n==null?void 0:n.items)),l.default===void 0&&delete l.default,"required"in l&&typeof l.required=="boolean"&&(i.required.indexOf(c)==-1&&i.required.push(c),delete l.required),Object.assign(o,{[c]:l})},{})),Object.assign({type:"object"},i)}var y=(e,t)=>{var r,i,o,c;let a=Object.assign({},e);for(var n in t)typeof t[n]!="object"||!t[n]||((((r=t[n])===null||r===void 0?void 0:r.type)=="integer"||((i=t[n])===null||i===void 0?void 0:i.type)=="number")&&(a[n]=Object.assign(Object.assign({},a[n]),{"ui:options":{widget:"updown"}})),!((o=t[n])===null||o===void 0)&&o.ui&&(a[n]=Object.assign(Object.assign({},a[n]),{"ui:options":Object.assign(Object.assign({},(c=a[n])===null||c===void 0?void 0:c["ui:options"]),t[n].ui)})),a=Object.assign(Object.assign({},a),{[n]:t[n].items?{items:y(a[n],t[n].items.properties)}:y(a[n],t[n].properties||{})}));return a};function _(e,t){switch(t){case"string":return e;case"object":try{return typeof e=="object"&&e!=null?e:JSON.parse(e)}catch(r){return null}case"array":try{return Array.isArray(e)?e:JSON.parse(e)}catch(r){return null}case"number":return parseFloat(e);case"integer":return parseInt(e);case"boolean":return e=="true"||e=="1";default:return e}}function F(e,t){return Object.keys(t).reduce((r,i)=>{let o=t[i],c=O(i),a=e==null?void 0:e.properties[c],n=a==null?void 0:a.type,s=_(o,n);return s!=null&&!i.startsWith("data-attribute")&&!["class","id","contenteditable"].includes(i)?Object.assign(Object.assign({},r),{[c]:s}):r},{})}function H(e,t){return Object.assign(Object.assign({},X(e)),F(e,t))}function X(e){return Object.keys(e.properties).reduce((t,r)=>{var i,o;return((i=e.properties[r])===null||i===void 0?void 0:i.default)!=null?Object.assign(Object.assign({},t),{[r]:(o=e.properties[r])===null||o===void 0?void 0:o.default}):t},{})}var j=typeof window!="undefined"?window.BYOCDatasources||(window.BYOCDatasources={}):{};function k(e,t){if(typeof e!="function")throw new Error("The first argument of registerDatasource must be a function returning DataSettings or Promise of data");if(!t.id)throw new Error("Missing 'id' property in input");if(!/^[a-zA-Z0-9-_]+$/.test(t.id))throw new Error("Invalid 'id' property in input. 'id' should only contain alphanumeric characters, hyphens, and underscores.");j[t.id]=Object.assign(Object.assign({},Q(t)),{handler:e}),q()}function I(e){return j[e]}function Q(e){let{id:t,name:r,title:i,properties:o,sample:c,schema:a,description:n=null,type:s="object"}=e;return{id:t,description:n,sample:c,name:r||i||t,handler:l=>l,schema:a||o?v(Object.assign(Object.assign({},a||{properties:o,type:s}),{title:(a==null?void 0:a.title)||i||r})):void 0}}var U;function q(){clearTimeout(U),typeof window!="undefined"&&window.parent!==window&&(U=setTimeout(()=>{var e;(e=window.parent)===null||e===void 0||e.postMessage(JSON.stringify({action:"register-datasources",data:Object.values(j)}),"*")},30))}q();function le(e,t){let r=j[e];return r!=null&&r.handler?r.handler(t):t}var B=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(r[i[o]]=e[i[o]]);return r};function V(e,t,r){let{thumbnail:i="https://feaasstatic.blob.core.windows.net/assets/thumbnails/byoc.svg",name:o,id:c=e.name,group:a=null,ui:n,isHidden:s=!1,datasourceIds:l=[],links:d={},meta:f={},uiSchema:u,schema:p}=e,g=B(e,["thumbnail","name","id","group","ui","isHidden","datasourceIds","links","meta","uiSchema","schema"]),L=p||g||{},W=u||n||{},m=v(Object.assign(Object.assign({description:"External component"},L),{type:"object"}),r),K=y(W,m.properties||{});return{component:t||(()=>null),name:o,schema:m,uiSchema:K,thumbnail:i,group:a||"Default collection",isHidden:s,id:c,datasourceIds:l,links:d,meta:f,title:(m==null?void 0:m.title)||(g==null?void 0:g.title)||o}}var J,Z=typeof HTMLElement!="undefined"?HTMLElement:typeof windowJSDOM!="undefined"?windowJSDOM.HTMLElement:class{setAttribute(){}},x=typeof window!="undefined"?window.BYOCComponents||(window.BYOCComponents={}):{};function $(e,t,r={}){if(!(t!=null&&t.name))throw new Error("Could not register external component. Please make sure you provide a name in the options"+JSON.stringify(t));let i=V(t,e,r);x[i.id]=i,G(e)&&w.register("byoc-"+b(t.name),void 0,e),R()}function G(e){return e&&"prototype"in e&&"setAttribute"in e.prototype}function ee(e,t={}){var r;let i=(r=D(e))===null||r===void 0?void 0:r.schema;return i?H(i,t):t}function ge(e){let t=D(e);return Object.keys((t==null?void 0:t.schema.properties)||{}).filter(r=>{var i,o;return((o=(i=t==null?void 0:t.uiSchema)===null||i===void 0?void 0:i[r])===null||o===void 0?void 0:o["ui:widget"])!="hidden"})}function D(e){if(typeof e!="string"){if(e&&"schema"in e)return e;throw new Error(`Component name should be a string, got ${typeof e}`)}let[t,r]=e.split("?");var i=x[t];if(r){let o=x[e];if(!o&&!i)return null;o&&(i=Object.assign(Object.assign(Object.assign({},i),o),{component:o.component||(i==null?void 0:i.component)})),r.split(/\&/g).forEach(c=>{var a,n,s;let[l,d]=c.split("="),f=((a=i.schema.properties)===null||a===void 0?void 0:a[l])||{type:"string"};i=Object.assign(Object.assign({},i),{schema:Object.assign(Object.assign({},i.schema),{properties:Object.assign(Object.assign({},i.schema.properties),{[l]:Object.assign(Object.assign({},f),{default:_(decodeURIComponent(d),f.type)})})}),uiSchema:Object.assign(Object.assign({},i.uiSchema),{[l]:Object.assign(Object.assign({},i.uiSchema[l]),{"ui:widget":(s=(n=i.uiSchema[l])===null||n===void 0?void 0:n["ui:widget"])!==null&&s!==void 0?s:"hidden"})})})})}return i}function be(e){let{componentName:t,className:r,fallbackWrapper:i,fallback:o,suppressHydrationWarning:c,_dynamic:a,datasources:n}=e,s=B(e,["componentName","className","fallbackWrapper","fallback","suppressHydrationWarning","_dynamic","datasources"]);try{var l=typeof n=="string"?JSON.parse(n):n}catch(p){}let d=Object.values(l||{}).find(p=>p&&!Array.isArray(p)&&Object.keys(p).length>0),f=Object.assign(Object.assign(Object.assign({},d),ee(t,Object.assign(Object.assign({},d),s))),l?{datasources:l}:{}),u=Object.assign(Object.assign({"data-external-id":t},P(f)),{suppressHydrationWarning:!0,class:r});return te.forEach(p=>{Object.assign(u,{[b(p)]:E[p]})}),Object.keys(u).forEach(p=>{let g=u[p];if(g&&typeof g=="object"&&p!="class"&&p!="children")try{Object.assign(u,{[p]:JSON.stringify(g)})}catch(L){delete u[p]}(typeof g=="function"||g==null)&&delete u[p]}),{attributes:u,properties:f,merged:Object.assign(Object.assign({},E),f)}}function R(){clearTimeout(J),typeof window!="undefined"&&window.parent!==window&&(J=setTimeout(()=>{var e;(e=window.parent)===null||e===void 0||e.postMessage(JSON.stringify({action:"register-components",data:Object.values(x)}),"*")},30))}R();var w=class extends Z{connectedCallback(){try{JSON.parse(String(this.getAttribute("components"))).forEach(t=>{D(t.id)||$(null,t)}),JSON.parse(String(this.getAttribute("datasources"))).forEach(t=>{I(t.id)||k(r=>r,t)})}catch(t){}}static register(t,r,i=this){r==null&&(r=typeof window!="undefined"?window:void 0),r&&!r.customElements.get(t)&&r.customElements.define(t,class extends i{})}},E={};function me(e){E=e}var te=["sitecoreEdgeUrl","sitecoreEdgeContextId"];w.register("byoc-registration");export{h as BYOCDataTypes,w as BYOCRegistration,Z as WebComponent,A as XMTypes,E as contextProperties,le as customizeDataSettings,D as getComponent,ge as getComponentConfigurablePropertyNames,ee as getComponentProperties,I as getDatasource,be as getMergedComponentProperties,X as getSchemaDefaults,H as getSchemaProperties,G as isWebComponent,V as normalizeOptions,ie as objectKeysToCamelCase,P as objectKeysToKebabCase,F as parseSchemaProperties,_ as parseValue,$ as registerComponent,z as registerDataType,k as registerDatasource,x as registered,j as registeredDatasources,te as serializedContextProperties,me as setContextProperties,R as setRegistrationCallback,O as toCamelCase,b as toKebabCase,v as transformSchema,N as transformSchemaObject,y as transformUiSchema,T as traverseSchema};
//# sourceMappingURL=index.esm.js.map
